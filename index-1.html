<!DOCTYPE html>
<html>
        <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <link rel="stylesheet" type="text/css" href="css/main.css" />
        <title>Hello World</title>
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"></script>
        <script>
             
 var directionsDisplay;
var directionsService = new google.maps.DirectionsService();
var map;
var currentLocation = new google.maps.LatLng(37.7699298, -122.4469157);
var oceanBeach = new google.maps.LatLng(37.7683909618184, -122.51089453697205);
var lat;
var longi;
var currentLocationLatLng = new google.maps.LatLng(lat, longi);

var selectedMode = "TRANSIT";

var request = {

                
      origin: currentLocation,
  destination: oceanBeach,
  //    origin: new google.maps.LatLng(lat, longi),
  // Note that Javascript allows us to access the constant
      // using square brackets and a string value as its
      // "property."
   //   travelMode: google.maps.TravelMode.selectedMode
   travelMode: google.maps.TravelMode.DRIVING

  };
 
            $(document).on("pageinit", "#map-page", function() {
                getcurrentlatlong();
});
             
function initMap(){
    var latlng = new google.maps.LatLng(-34.397, 150.644);
    var myOptions = {
        zoom: 8,
        center: currentLocation,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);
};		 
			 
            function getcurrentlatlong(){
         /*       if (navigator.geolocation)
                {              
                  navigator.geolocation.getCurrentPosition(onSuccess, onError, { enableHighAccuracy:true });//enableHighAccuracy:true means if network not enable then it ask for GPS
                } */
				
				onSuccess();
            }
             
         //   function onSuccess(position) {  
		   function onSuccess() {   // enable ur gps, it takes sometime to call till now wait   
		//	currentLocation = position;
           //     lat=position.coords.latitude;
             //   longi=position.coords.longitude;

             //    currentLocationLatLng = new google.maps.LatLng(lat, longi),
			   map = new google.maps.Map(document.getElementById("map-canvas"), request);
			   directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
  //    directionsDisplay.setDirections(response);
	 // getcurrentlatlong();
	
		//	 directionsDisplay.setMap(map);
			 
    }
	
  });
			 
			
            }
         
        </script>
        </head>
        <body>
<div data-role="page" id="home-screen">
          <div class="app">
    <h1>Ben's Smart Alarm</h1>
    <div id="deviceready" class="blink">
              <p class="event listening">Connecting to Device</p>
              <p class="event received">Device is Ready</p>
            </div>
    <div data-role="content"> 
    
    <a data-role="button" href="#settings-page" data-transition="flip">Change settings</a>
    
    </div>
  </div>
</div>

<div data-role="page" id="settings-page">
<script>




function calcRoute() {
	
	
	
	
	
  selectedMode = document.getElementById("mode").value;
   getcurrentlatlong();
   


}</script>

     <div data-role="header">
     <a href="#home-screen" data-direction="reverse">Back</a>
		<h1>Settings</h1>
	</div>
    
    <div data-role="header">
    <h2>Alarm settings</h2>
    
    <h2>Location settings</h2>
    <p>Start Location</p>
    <a data-role="button" href="#map-page"  data-rel="dialog" data-transition="pop">View Map</a>
    <p>Destination</p>
    
    <p>Travel mode</p>
<select id="mode" onchange="initMap();">
  <option value="DRIVING">Driving</option>
  <option value="WALKING">Walking</option>
  <option value="BICYCLING">Bicycling</option>
  <option value="TRANSIT">Transit</option>
</select>
    
    <div id="map_canvas" style="height: 400px; width:100%;"> </div>
    
</div>

</div>

<!-- /page -->
<div data-role="page" id="map-page"> 
          <!-- /header -->
          
          <div data-role="header">
    <h1> Map</h1>
    </div>
    <!-- /content -->
    
    <div class="ui-bar-c ui-corner-all ui-shadow" data-role="content" style="padding: 1em;">
              <div id="map_canvas2" style="height: 400px; width:100%;"> </div>
            </div>
  </div>
 
<script type="text/javascript" src="js/index.js"></script> 
<script type="text/javascript">
            app.initialize();
        </script>
</body>
</html>

<!DOCTYPE html>
<html>
        <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <title>Hello World</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"></script>
        <script>
             
 
            $(document).on("pageinit", "#map-page", function() {
                getcurrentlatlong();
            });
             
            function getcurrentlatlong(){
                if (navigator.geolocation)
                {              
                  navigator.geolocation.getCurrentPosition(onSuccess, onError, { enableHighAccuracy:true });//enableHighAccuracy:true means if network not enable then it ask for GPS
                }
            }
             
            function onSuccess(position) {   // enable ur gps, it takes sometime to call till now wait   
                var lat=position.coords.latitude;
                var longi=position.coords.longitude;

                 mapCenter = new google.maps.LatLng(lat, longi),
                 myOptions = {
                     zoom:10,
                     mapTypeId: google.maps.MapTypeId.ROADMAP,
                     center: mapCenter,
                 },
                map = new google.maps.Map(document.getElementById("map_canvas"), myOptions),
                  
				  
				  
                 marker = new google.maps.Marker({
                     position: new google.maps.LatLng(lat, longi),
                     map: map,
                     title:"Current Location!"
                     })
					 
					 
					 var trafficLayer = new google.maps.TrafficLayer();
  trafficLayer.setMap(map);
            }
             
            function onError(error){
                alert("Getting the error"+error.code + "\nerror mesg :" +error.message);
            }
          
   
        </script>
        </head>
        <body>
<div class="app" id="home-screen">
          <h1>Ben's Smart Alarm</h1>
          <div id="deviceready" class="blink">
    <p class="event listening">Connecting to Device</p>
    <p class="event received">Device is Ready</p>
  </div>
          <div data-role="content"> <a data-role="button" data-transition="fade" href="http://www.blogger.com/blogger.g?blogID=5642871235599658673#map-page">Click to see the Map</div>
        </div>
</div>
<!-- /page -->
<div data-role="page" id="map-page">
<!-- /header -->

<div data-role="header">
          <h1> Map</h1>
          <a data-icon="home" href="http://www.blogger.com/blogger.g?blogID=5642871235599658673#home-page">Home 
          
          <!-- /content -->
          
          <div class="ui-bar-c ui-corner-all ui-shadow" data-role="content" style="padding: 1em;">
    <div id="map_canvas" style="height: 400px; width:300px;"> </div>
  </div>
        </div>
<script type="text/javascript" src="cordova.js"></script> 
<script type="text/javascript" src="js/index.js"></script> 
<script type="text/javascript">
            app.initialize();
        </script>
</body>
</html>
